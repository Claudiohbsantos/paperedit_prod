function FloatArray2Int16(e){let a=new Int16Array(e.length);for(var t=0,r=e.length;t<r;t++)e[t]<0?a[t]=32768*e[t]:a[t]=32767*e[t];return a}self.importScripts("../vendor/lame.min.js"),self.onmessage=function(e){let a=new lamejs.Mp3Encoder(1,e.data.sampleRate,128),t=[],r=FloatArray2Int16(e.data.array);for(var n=0;n<r.length;n+=1152){let e=r.subarray(n,n+1152),l=a.encodeBuffer(e);l.length>0&&t.push(l)}var l=a.flush();l.length>0&&t.push(new Int8Array(l));let s=new Blob(t,{type:"audio/mp3"}),o={dialId:e.data.dialId,blob:s};this.postMessage(o)};