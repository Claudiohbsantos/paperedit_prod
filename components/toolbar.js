"use strict";import*as utils from"../modules/utils.js";import actions from"../modules/userActions.js";import audioSettings from"./audioSettings.js";import player from"../modules/player.js";import goToTime from"./goToTime.js";import importMenu from"./import-menu.js";import exportMenu from"./export-menu.js";import settingsMenu from"./settings-menu.js";export default{init(){this.attachListeners()},attachListeners(){document.getElementById("btn-hidestriked").addEventListener("click",actions.hideStriked.handler),document.getElementById("btn-audiosettings").addEventListener("click",()=>audioSettings.show()),document.getElementById("btn-stamp").addEventListener("click",actions.insertCurrentTimestamp.handler),document.getElementById("btn-goto").addEventListener("click",()=>goToTime.show()),document.getElementById("btn-prevmarker").addEventListener("click",actions.goToPreviousMarker.handler),document.getElementById("btn-skipback").addEventListener("click",actions.skipBack.handler),document.getElementById("btn-playpause").addEventListener("click",actions.playPause.handler),document.getElementById("btn-skipforward").addEventListener("click",actions.skipForward.handler),document.getElementById("btn-nextmarker").addEventListener("click",actions.goToNextMarker.handler),document.getElementById("btn-import").addEventListener("click",()=>importMenu.show()),document.getElementById("btn-export").addEventListener("click",()=>exportMenu.show()),document.getElementById("btn-settings").addEventListener("click",()=>settingsMenu.show()),document.addEventListener("unloadaudio",hideEditedTime),document.addEventListener("loadaudio-end",showEditedTime),document.getElementById("waveform").addEventListener("region-changed",updateEditTimeDisplay),document.addEventListener("playerStarted",attachPlayerListeners)}};function attachPlayerListeners(){player.on("play",displayPauseButton),player.on("pause",displayPlayButton),document.getElementById("btn-filter").addEventListener("click",actions.toggleSkipStriked.handler)}function hideEditedTime(){document.getElementById("display-editedtime").style.opacity=0,setTimeout(()=>{document.getElementById("display-editedtime").style.display="none"},500)}function showEditedTime(){document.getElementById("display-editedtime").style.display="inline",setTimeout(()=>{document.getElementById("display-editedtime").style.opacity=1},100)}function displayPauseButton(){let e=document.getElementById("playpause-svg"),t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d","M23 49V1H11v48h12zM13 3h8v44h-8V3zM39 49V1H27v48h12zM29 3h8v44h-8V3z"),e.removeChild(e.children[0]),e.appendChild(t)}function displayPlayButton(){let e=document.getElementById("playpause-svg"),t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d","M7 1.217v47.566L45.918 25 7 1.217zm2 3.566L42.082 25 9 45.217V4.783z"),e.removeChild(e.children[0]),e.appendChild(t)}function updateEditTimeDisplay(e){document.getElementById("display-editedtime").textContent=utils.tsFromSeconds(e.detail.editTime)}