"use strict";export class Component{constructor(e){this.element=e}show(){this.element.style.opacity=1,this.element.style.visibility="visible",this.element.style.pointerEvents="auto",this.closeOnEsc(),this.showBlurBarrier(),setTimeout(()=>{this.disallowClicksOutside()},0),this.focus()}hide(){this.element.style.opacity=0,this.element.style.visibility="hidden",this.element.style.pointerEvents="none",this.hideBlurBarrier(),this.allowClicksOutside()}closeOnEsc(){this.element.addEventListener("keyup",e=>{"Escape"===e.key&&this.hide()})}allowClicksOutside(){document.removeEventListener("click",this.documentClickHandler)}disallowClicksOutside(){document.addEventListener("click",t);const e=this;function t(t){e.element.contains(t.target)||e.hide()}this.documentClickHandler=t}showBlurBarrier(){this.blurLayer=document.createElement("div"),this.blurLayer.classList.add("blur-barrier"),document.body.appendChild(this.blurLayer),setTimeout(()=>{this.blurLayer.style.backgroundColor="rgba(0,0,0,0.2)"},50)}hideBlurBarrier(){this.blurLayer.style.backgroundColor="transparent",setTimeout(()=>{this.blurLayer.remove()},500)}focus(e=this.element){for(let t of e.children)if(t.children.length>0){if(this.focus(t))return}else if(t.focus(),document.activeElement==t)return!0}}