import*as utils from"../modules/utils.js";import player from"../modules/player.js";import{userSettings as settings,saveSettings}from"../modules/userSettings.js";import{Component}from"./component.js";class AudioSettings extends Component{constructor(){super(document.getElementById("audio-settings")),this.updateElements(),this.attachListeners()}updateElements(){document.getElementById("tinput-skiplength").value=settings.skipLength}attachListeners(){document.getElementById("rinput-volume").addEventListener("input",changeVolumeFromSlider),document.getElementById("rinput-speed").addEventListener("input",changeSpeedFromSlider),document.getElementById("tinput-skiplength").addEventListener("change",changeSkipLength),document.getElementById("tinput-skiplength").addEventListener("keydown",e=>{this.hideOnEnter(e)});for(let e of document.getElementsByClassName("audio-settings-slider"))e.addEventListener("dblclick",resetSliderToDefault)}hideOnEnter(e){e.key&&"Enter"===e.key&&this.hide()}}function changeSkipLength(e){let t=utils.parseTimeInput(e.target.value,settings.framerate);!t||t<0?e.target.value=2:(settings.skipLength=t,player.updateSkipLength(t),saveSettings())}function resetSliderToDefault(e){e.target.value=e.target.defaultValue,e.target.dispatchEvent(new Event("input"))}function changeVolumeFromSlider(e){player.setVolume(e.target.value)}function changeSpeedFromSlider(e){player.setPlaybackRate(e.target.value)}let singleton=new AudioSettings;export default singleton;